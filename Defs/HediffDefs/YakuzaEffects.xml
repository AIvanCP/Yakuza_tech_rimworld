<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <!-- Custom hediff for Yakuza technique effects -->
  <HediffDef>
    <defName>YakuzaStunned</defName>
    <label>technique stunned</label>
    <description>Stunned by a powerful Yakuza combat technique. Cannot move or act effectively.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.8, 0.8, 0.1)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>90</disappearsAfterTicks>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <setMax>0.1</setMax>
          </li>
          <li>
            <capacity>Manipulation</capacity>
            <setMax>0.1</setMax>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

  <HediffDef>
    <defName>YakuzaDisoriented</defName>
    <label>staggered</label>
    <description>Disoriented by a devastating combat technique. Reduced accuracy and movement speed.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.8, 0.4, 0.4)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>180</disappearsAfterTicks>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.6</postFactor>
          </li>
          <li>
            <capacity>Sight</capacity>
            <postFactor>0.7</postFactor>
          </li>
        </capMods>
        <statOffsets>
          <MeleeHitChance>-8</MeleeHitChance>
          <ShootingAccuracyPawn>-0.4</ShootingAccuracyPawn>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <!-- New: Slow debuff -->
  <HediffDef>
    <defName>YakuzaSlow</defName>
    <label>slowed</label>
    <description>Movement speed severely reduced by a Yakuza technique.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.6, 0.6, 1.0)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>180</disappearsAfterTicks>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <postFactor>0.8</postFactor>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

  <!-- New: Weakened debuff -->
  <HediffDef>
    <defName>YakuzaWeakened</defName>
    <label>weakened</label>
    <description>Combat effectiveness reduced by a devastating Yakuza technique.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.8, 0.6, 0.6)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>180</disappearsAfterTicks>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <statOffsets>
          <MeleeDamageFactor>-0.15</MeleeDamageFactor>
          <ShootingAccuracyPawn>-0.15</ShootingAccuracyPawn>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <!-- New: Armor Shred debuff -->
  <HediffDef>
    <defName>YakuzaArmorShred</defName>
    <label>armor compromised</label>
    <description>Armor integrity compromised by a precise Yakuza technique.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.9, 0.5, 0.5)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>180</disappearsAfterTicks>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <statOffsets>
          <ArmorRating_Blunt>-0.25</ArmorRating_Blunt>
          <ArmorRating_Sharp>-0.25</ArmorRating_Sharp>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <!-- New: Enhanced Reflexes buff (for Breakfall) -->
  <HediffDef>
    <defName>YakuzaEnhancedReflexes</defName>
    <label>enhanced reflexes</label>
    <description>Reflexes heightened after a perfect recovery technique.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.5, 1.0, 0.5)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <maxSeverity>1.0</maxSeverity>
    <comps>
      <li Class="HediffCompProperties_Disappears">
        <disappearsAfterTicks>120</disappearsAfterTicks>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>0.01</minSeverity>
        <statOffsets>
          <MeleeDodgeChance>0.30</MeleeDodgeChance>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <!-- Sound effects for techniques -->
  <!-- Tiger Drop sound - enabled since audio file exists -->
  <SoundDef>
    <defName>YakuzaTigerDrop</defName>
    <context>MapOnly</context>
    <eventNames />
    <maxSimultaneous>3</maxSimultaneous>
    <subSounds>
      <li>
        <grains>
          <li Class="AudioGrain_Clip">
            <clipPath>Yakuza/TigerDrop</clipPath>
          </li>
        </grains>
        <volumeRange>0.8~1.2</volumeRange>
        <pitchRange>0.9~1.1</pitchRange>
      </li>
    </subSounds>
  </SoundDef>

  <!-- Other technique sounds disabled until audio files are added
  To enable more sounds, place .wav files in Sounds/Yakuza/ folder and uncomment definitions
  -->

</Defs>